# Widget

The widget is the main part of the FastLoyal system, and is integrated by simply copying the already pre made script tag from our Back Office into your website html.

## Authenticate

To authenticate a user that is logged into your platform, you will need to send a couple of things to the FastLoyal system.
Using the public method provided by the script on your front-end app, fetch a `sessionId` parameter (this is generated by the widget script each time the script is loaded)
Using that `sessionId` param, send a authentication request to the FastLoyal API, and we will take care of the rest.

There are a couple of required parameters to send:

- `userId` - This is the unique identifier of a user within your system.
- `email` - This is the email of a user within your system.
- `sessionId` - This is the sessionId generated by the widget and can be fetched using the getSessionId() method.

There are also a few optional parameters that you can send to our system to improve the UI quality for the users:

- `username`
- `firstName`
- `lastName`
- `phoneNumber`

## Authenticate Flow And Example

- You fetch the sessionId param on your Front-End app using a public method that the script for the widget provides, the method is mentioned above.
- You send a request from your Front-End app to your API to send this sessionId.
- Your API then sends a POST request to the FastLoyal API on '/integration/authenticate'.
- We then notify the widget that had that sessionId with the data about the user.

### Authenticate request example

```json
{
  "data": {
    "userId": "550e8400-e29b-41d4-a716-446655440000",
    "email": "testCoupon123",
    "sessionId": "4828400-47qr-aq7e-z897-558721779624",
    "username": "ASCRA", //Optional Parameter
    "firstName": "Mark", //Optional Parameter
    "lastName": "Zark", //Optional Parameter
    "phoneNumber": "+381658974512" //Optional Parameter
  },
  "signature": {{generated signature}}
}
```

### Valid Authenticate request response data example

```json
{
  "data": {
    "userId": "550e8400-e29b-41d4-a716-446655440000",
    "sessionId": "4828400-47qr-aq7e-z897-558721779624",
    "authenticated": true
  },
  "signature": {{generated signature}}
}
```
